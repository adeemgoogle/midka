 public class PostgresRepository
 {
     private readonly IConfiguration _configuration;
     public PostgresRepository(IConfiguration configuration)
     {
         _configuration = configuration;
     }

     public IDbConnection ConnectToDB()
     {
         return ConnectDB("db");
     }

     public IDbConnection ConnectDB(string connectionName)
     {
         var connectionString = _configuration.GetConnectionString(connectionName);
         if (string.IsNullOrWhiteSpace(connectionString))
         {
             throw new ArgumentException($"Connection string '{connectionName}' is missing or empty.");
         }

         var connection = new NpgsqlConnection(connectionString);

         try
         {
             connection.Open();
             Console.WriteLine($"Connection to {connectionName} established successfully.");
         }
         catch (Exception ex)
         {
             Console.WriteLine($"An error occurred while connecting to {connectionName}: {ex.Message}");
             throw;
         }

         return connection;

     }
 }


Ð² Program.cs
 var dbConnector = new PostgresRepository(_config);
 var connection = dbConnector.ConnectToDB();
