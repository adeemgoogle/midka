class Program
{
    private static readonly IConfiguration _config = new ConfigurationBuilder().SetBasePath(AppDomain.CurrentDomain.BaseDirectory).AddJsonFile("appsettings.json").AddEnvironmentVariables().Build();

    static async Task<int> Main(string[] args)
    { 
        Log.Logger = new LoggerConfiguration()
    .WriteTo.Console(restrictedToMinimumLevel: LogEventLevel.Debug, formatter: new RenderedCompactJsonFormatter())
    .CreateLogger();
}
-------------------------------------------------------------------------------------
using Microsoft.AspNetCore.Builder;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.AspNetCore.Hosting;
public class Startup
{
    private readonly IConfiguration _configuration;

    public Startup(IConfiguration configuration)
    {
        _configuration = configuration;
    }

    public void ConfigureServices(IServiceCollection services)
    {
        services.AddMvc();
        services.AddHealthChecks()
                .AddCheck<DatabaseHealthCheck>("db");
    }

    public void Configure(IApplicationBuilder app, IHostingEnvironment env)
    {
        if (env.IsDevelopment())
        {
            
            app.UseCors(builder =>
            {
                builder
                .AllowAnyOrigin()
                .AllowAnyMethod()
                .AllowAnyHeader();
            });
            app.UseMvc(routes =>
             {
                 routes.MapRoute(
                     name: "default",
                     template: "healthz/{controllers=HelathzCheck}/{action=HealthzCheck}/{id?}"
                     );
             });

        }
    }   
}
------------------------------------------------------------------------------------

напиши сюда код запуска проекта где using Microsoft.Extensions.Hosting; версия 2.1.1 
