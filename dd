write Xinut test for it

public string ReadTrades()
{
    if (isReadingTable["B"])
    {
        return "Already reading B table";
    }
    checkConnection();

    isReadingTable["B"] = true;
    Thread thread = new Thread(WriteTrades);
    thread.Start();

    return "OK";
}

private void WriteTrades()
{
    Console.WriteLine("starting read B table...");
    int tableDescriptor;
    var table = OpenTableNonString("B", null, out tableDescriptor);
    var trades = TradeTable.ParseTradesFromUniversalTable(table);
    if (trades.Rows != null && trades.Rows.Count != 0)
    {
        var partitions = trades.Rows.partition(500);
        foreach (var partition in partitions)
        {
            TradeTable tradeTable = new TradeTable(table.Name, table.Ref);
            tradeTable.Rows = (List<TradeRow>)partition;
            var jsonStr = JsonConvert.SerializeObject(tradeTable);
            Kafka.Write("B", "B", jsonStr);
        }

        
        isReadingTable["TRADES"] = false;
    }
    else
    {
     
        isReadingTable["TRADES"] = false;
    }
}
