 public static unsafe string GetStringWhenWeKnownLength(int* ptr, out int* newPtr, int sdvig, out int newSdvig, int length)
 {
     string result;

     if (sdvig == 0)
     {
         result = Marshal.PtrToStringAnsi(new IntPtr(ptr), length);
     }
     else
     {
         result = Marshal.PtrToStringUni(IntPtr.Add(new IntPtr(ptr), sdvig), length);
     }

     while (length % 4 != 0)
     {
         length--;
         sdvig++;
     }

     while (sdvig >= 4)
     {
         sdvig -= 4;
         ptr += 1;
     }

     ptr += length / 4;

     newSdvig = sdvig;

     newPtr = ptr;

     return result;
 }
